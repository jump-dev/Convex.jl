<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Contributing · Convex.jl</title><meta name="title" content="Contributing · Convex.jl"/><meta property="og:title" content="Contributing · Convex.jl"/><meta property="twitter:title" content="Contributing · Convex.jl"/><meta name="description" content="Documentation for Convex.jl."/><meta property="og:description" content="Documentation for Convex.jl."/><meta property="twitter:description" content="Documentation for Convex.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Convex.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><input class="collapse-toggle" id="menuitem-1" type="checkbox"/><label class="tocitem" for="menuitem-1"><span class="docs-label">Introduction</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../introduction/installation/">Installation</a></li><li><a class="tocitem" href="../../introduction/quick_tutorial/">Quick Tutorial</a></li><li><a class="tocitem" href="../../introduction/dcp/">Extended formulations and the DCP ruleset</a></li><li><a class="tocitem" href="../../introduction/faq/">FAQ</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">General examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/general_examples/DCP_analysis/">DCP analysis</a></li><li><a class="tocitem" href="../../examples/general_examples/basic_usage/">Basic Usage</a></li><li><a class="tocitem" href="../../examples/general_examples/chebyshev_center/">Chebyshev center</a></li><li><a class="tocitem" href="../../examples/general_examples/control/">Control</a></li><li><a class="tocitem" href="../../examples/general_examples/dualization/">Dualization</a></li><li><a class="tocitem" href="../../examples/general_examples/huber_regression/">Huber regression</a></li><li><a class="tocitem" href="../../examples/general_examples/lasso_regression/">Lasso, Ridge and Elastic Net Regressions</a></li><li><a class="tocitem" href="../../examples/general_examples/logistic_regression/">Logistic regression</a></li><li><a class="tocitem" href="../../examples/general_examples/max_entropy/">Entropy Maximization</a></li><li><a class="tocitem" href="../../examples/general_examples/optimal_advertising/">Optimal advertising</a></li><li><a class="tocitem" href="../../examples/general_examples/robust_approx_fitting/">Robust approximate fitting</a></li><li><a class="tocitem" href="../../examples/general_examples/svm/">Support vector machine</a></li><li><a class="tocitem" href="../../examples/general_examples/svm_l1regularization/">SVM with L^1 regularization</a></li><li><a class="tocitem" href="../../examples/general_examples/trade_off_curves/">Regularized least-squares</a></li><li><a class="tocitem" href="../../examples/general_examples/worst_case_analysis/">Worst case risk analysis</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Mixed integer</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/mixed_integer/binary_knapsack/">Binary (or 0-1) knapsack problem</a></li><li><a class="tocitem" href="../../examples/mixed_integer/n_queens/">N queens</a></li><li><a class="tocitem" href="../../examples/mixed_integer/section_allocation/">Section Allocation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Optimization with complex variables</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/optimization_with_complex_variables/Fidelity in Quantum Information Theory/">Fidelity in quantum information theory</a></li><li><a class="tocitem" href="../../examples/optimization_with_complex_variables/phase_recovery_using_MaxCut/">Phase recovery using MaxCut</a></li><li><a class="tocitem" href="../../examples/optimization_with_complex_variables/povm_simulation/">POVM simulation</a></li><li><a class="tocitem" href="../../examples/optimization_with_complex_variables/power_flow_optimization/">Power flow optimization</a></li><li><a class="tocitem" href="../../examples/optimization_with_complex_variables/quantum_conditional_entropy/">Continuity of the quantum conditional entropy</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Portfolio optimization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/portfolio_optimization/portfolio_optimization/">Portfolio Optimization</a></li><li><a class="tocitem" href="../../examples/portfolio_optimization/portfolio_optimization2/">Portfolio Optimization - Markowitz Efficient Frontier</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">Supplemental material</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/supplemental_material/Convex.jl_intro_ISMP2015/">Convex Optimization in Julia</a></li><li><a class="tocitem" href="../../examples/supplemental_material/paper_examples/">Paper examples</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-6" type="checkbox"/><label class="tocitem" for="menuitem-2-6"><span class="docs-label">Time series</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/time_series/time_series/">Time Series Analysis</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-7" type="checkbox"/><label class="tocitem" for="menuitem-2-7"><span class="docs-label">Tomography</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/tomography/tomography/">Tomography</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/types/">Basic Types</a></li><li><a class="tocitem" href="../../manual/operations/">Supported Operations</a></li><li><a class="tocitem" href="../../manual/complex-domain_optimization/">Complex-domain Optimization</a></li><li><a class="tocitem" href="../../manual/solvers/">Solvers</a></li><li><a class="tocitem" href="../../manual/performance_tips/">Performance tips</a></li><li><a class="tocitem" href="../../manual/advanced/">Advanced Features</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">Developer Docs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../problem_depot/">Problem Depot</a></li><li class="is-active"><a class="tocitem" href>Contributing</a><ul class="internal"><li><a class="tocitem" href="#Adding-examples"><span>Adding examples</span></a></li><li><a class="tocitem" href="#Adding-atoms"><span>Adding atoms</span></a></li><li><a class="tocitem" href="#Fixing-the-guts"><span>Fixing the guts</span></a></li><li><a class="tocitem" href="#Developer-notes"><span>Developer notes</span></a></li></ul></li><li><a class="tocitem" href="../credits/">Credits</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../reference/api/">API</a></li><li><a class="tocitem" href="../../reference/atoms/">Supported operations</a></li></ul></li><li><a class="tocitem" href="../../release_notes/">Release notes</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Developer Docs</a></li><li class="is-active"><a href>Contributing</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Contributing</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/jump-dev/Convex.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/jump-dev/Convex.jl/blob/master/docs/src/developer/contributing.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Contributing"><a class="docs-heading-anchor" href="#Contributing">Contributing</a><a id="Contributing-1"></a><a class="docs-heading-anchor-permalink" href="#Contributing" title="Permalink"></a></h1><p>We&#39;d welcome contributions to the Convex.jl package. Here are some short instructions on how to get started. If you don&#39;t know what you&#39;d like to contribute, you could</p><ul><li>take a look at the current   <a href="https://github.com/jump-dev/Convex.jl/issues">issues</a> and pick   one. (Feature requests are probably the easiest to tackle.)</li><li>add a <a href="https://github.com/jump-dev/Convex.jl/tree/master/examples">usage   example</a>.</li></ul><p>Then submit a pull request (PR). (Let us know if it&#39;s a work in progress by putting [WIP] in the name of the PR.)</p><h2 id="Adding-examples"><a class="docs-heading-anchor" href="#Adding-examples">Adding examples</a><a id="Adding-examples-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-examples" title="Permalink"></a></h2><ul><li>Take a look at our existing <a href="https://github.com/jump-dev/Convex.jl/tree/master/examples">usage   examples</a>   and add another in similar style.</li><li>Submit a PR. (Let us know if it&#39;s a work in progress by putting   [WIP] in the name of the PR.)</li><li>We&#39;ll look it over, fix up anything that doesn&#39;t work, and merge   it.</li></ul><h2 id="Adding-atoms"><a class="docs-heading-anchor" href="#Adding-atoms">Adding atoms</a><a id="Adding-atoms-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-atoms" title="Permalink"></a></h2><p>Here are the steps to add a new function or operation (atom) to Convex.jl. Let&#39;s say you&#39;re adding the new function <span>$f$</span>.</p><ul><li>Take a look at the   <a href="https://github.com/jump-dev/Convex.jl/blob/master/src/atoms/sdp_cone/nuclearnorm.jl">nuclear norm atom</a>   for an example of how to construct atoms, and see the   <a href="https://github.com/jump-dev/Convex.jl/blob/master/src/atoms/second_order_cone/norm.jl">norm atom</a>   for an example of an atom that depends on a parameter.</li><li>Copy paste (for example, the nuclear norm file), replace anything saying   nuclear norm with the name of the atom <span>$f$</span>, fill in monotonicity,   curvature, etc. Save it in the appropriate subdirectory of   <code>src/atoms/</code>.</li><li>Ensure the atom is a mutable struct, so that <code>objectid</code> can be called.</li><li>Add as a comment a description of what the atom does and its   parameters.</li><li>Ensure <code>evaluate</code> is only called during the definition of <code>evaluate</code> itself, from <code>conic_form!</code>, or   on constants or matrices. Specifically, <code>evaluate</code> must not be called on a potentially <code>fix!</code>&#39;d variable   when the expression tree is being built (for example, when constructing an atom or reformulating),   since then any changes to the variable&#39;s value (or it being <code>free!</code>&#39;d) will not be recognized.   See <a href="https://github.com/jump-dev/Convex.jl/issues/653">#653</a> and <a href="https://github.com/jump-dev/Convex.jl/issues/585">#585</a>   for previous bugs caused by misuse here.</li><li>Do not add constraints to variables directly during a reformulation.   Instead, create an atom to control the vexity, or return a partially   specified problem: <code>minimize(var, constraints...)</code>, to ensure the <code>vexity</code>   of the result is correct.</li><li>The most mathematically interesting part is the <code>new_conic_form!</code>   function. Following the example in the nuclear norm atom, you&#39;ll   see that you can just construct the problem whose optimal value is   <span>$f(x)$</span>, introducing any auxiliary variables you need, exactly as   you would normally in Convex.jl, and then call <code>conic_form!</code>   on that problem.</li><li>Add a test for the atom so we can verify it works in   <code>src/problem_depot/problem/&lt;cone&gt;</code>, where <code>&lt;cone&gt;</code> matches the subdirectory of   <code>src/atoms</code>. See <a href="../problem_depot/#How-to-write-a-ProblemDepot-problem">How to write a ProblemDepot problem</a> for details   on how to write the tests.</li><li>Following the other examples, add a test to <code>test/test_atoms.jl</code>.</li><li>Submit a PR, including a description of what the atom does and its   parameters. (Let us know if it&#39;s a work in progress by putting   [WIP] in the name of the PR.)</li><li>We&#39;ll look it over, fix up anything that doesn&#39;t work, and merge   it.</li></ul><h2 id="Fixing-the-guts"><a class="docs-heading-anchor" href="#Fixing-the-guts">Fixing the guts</a><a id="Fixing-the-guts-1"></a><a class="docs-heading-anchor-permalink" href="#Fixing-the-guts" title="Permalink"></a></h2><p>If you want to do a more major bug fix, you may need to understand how Convex.jl thinks about conic form.</p><p>To do this, start by reading <a href="http://arxiv.org/pdf/1410.4821.pdf">the Convex.jl paper</a>.</p><p>You may find our <a href="https://www.youtube.com/watch?v=SoI0lEaUvTs&amp;t=128s">JuliaCon 2014 talk</a> helpful as well; you can find the Jupyter notebook presented in the talk <a href="https://github.com/JuliaCon/presentations/tree/master/CVX">here</a>.</p><p>Convex has been updated several times over the years however, so older information may be out of date. Here is a brief summary of how the package works (as of July 2023).</p><ol><li>A <code>Problem{T}</code> struct is created by putting together an objective function and constraints. The problem is an expression graph, in which variables and constants are the leaf nodes, and atoms form the intermediate nodes. Here <code>T</code> refers to the numeric type of the problem that all data coefficients will be coerced to when we pass the data to a solver.</li><li>When we go to <code>solve!</code> a problem, we first load it into a MathOptInterface (MOI) model. To do so, we traverse the <code>Problem</code> and apply our extended formulations. This occurs via <code>conic_form!</code>. We construct a <code>Context{T}</code> associated to the problem, which holds an MOI model, and progressively load it by applying <code>conic_form!</code> to each object&#39;s children and then itself. For variables, <code>conic_form!</code> returns <code>SparseTape{T}</code> or <code>ComplexTape{T}</code>, depending on the sign variable. Likewise for constants, <code>conic_form!</code> returns either <code>Vector{T}</code> or <code>ComplexStructOfVec{T}</code>. Here a <code>Tape</code> refers to a lazy sequence of sparse affine operators that will be applied to a vector of variables. The central computational task of Convex is to compose this sequence of operators (and thus enact it&#39;s extended formulations). For atoms, <code>conic_form!</code> generally either creates a new object using Convex&#39; primitives (for example, another problem) and calls <code>conic_form!</code> on that, or, when that isn&#39;t possible, calls <code>operate</code> to manipulate the tape objects themselves (for example, to add a new operation to the composition). We try to minimize the amount of <code>operate</code> methods and defer to existing primitives when possible. <code>conic_form!</code> can also create new constraints and add them directly to the model. It is easy to create constraints of the form &quot;vector-affine-function-in-cone&quot; for any of MOI&#39;s many supported cones; these constraints do not need to be exposed at the level of Convex itself as <code>Constraint</code> objects, although they can be.</li><li>Once we have filled our <code>Context{T}</code>, we go to solve it with MOI. Then we recover the solution status and values of primal and dual variables, and populate them using dictionaries stored in the <code>Context</code>.</li></ol><p>You&#39;re now armed and dangerous. Go ahead and open an issue (or comment on a previous one) if you can&#39;t figure something out, or submit a PR if you can figure it out. (Let us know if it&#39;s a work in progress by putting [WIP] in the name of the PR.)</p><p>PRs that comment the code more thoroughly will also be welcomed.</p><h2 id="Developer-notes"><a class="docs-heading-anchor" href="#Developer-notes">Developer notes</a><a id="Developer-notes-1"></a><a class="docs-heading-anchor-permalink" href="#Developer-notes" title="Permalink"></a></h2><ul><li><code>conic_form!</code> is allowed to mutate the context, but should never mutate the atoms or problems</li><li>We currently construct a fresh context on every solve. It may be possible to set things up to reuse contexts for efficiency.</li><li>Data flow: we take in user data that may be of any type.<ul><li>At the level of problem formulation (when we construct atoms), we convert everything to an <code>AbstractExpr</code> (or <code>Constraint</code>); in particular, constants become <code>Constant</code> or <code>ComplexConstant</code>. At this time we don&#39;t know the numeric type that will be used to solve the problem.</li><li>Once we begin to <code>solve!</code> the problem, we recursively call <code>conic_form!</code>. The output is of type <code>SparseTape{T}</code>, <code>ComplexTape{T}</code>, <code>Vector{T}</code>, or <code>ComplexStructOfVec{T}</code>. We can call <code>operate</code> to manipulate these outputs.</li><li>We convert these to <code>MOI.VectorAffineFunction</code> before passing them to MOI.</li></ul></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../problem_depot/">« Problem Depot</a><a class="docs-footer-nextpage" href="../credits/">Credits »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Tuesday 10 December 2024 07:16">Tuesday 10 December 2024</span>. Using Julia version 1.10.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
