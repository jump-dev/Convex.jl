<!DOCTYPE html><HTML lang="en"><head><meta charset="UTF-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>Section Allocation · Convex.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script data-main="../../../assets/documenter.js" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link href="../../../assets/documenter.css" rel="stylesheet" type="text/css"/><script data-outdated-warner="">function maybeAddWarning () {
    const head = document.getElementsByTagName('head')[0];

    // Add a noindex meta tag (unless one exists) so that search engines don't index this version of the docs.
    if (document.body.querySelector('meta[name="robots"]') === null) {
        const meta = document.createElement('meta');
        meta.name = 'robots';
        meta.content = 'noindex';

        head.appendChild(meta);
    };

    // Add a stylesheet to avoid inline styling
    const style = document.createElement('style');
    style.type = 'text/css';
    style.appendChild(document.createTextNode('.outdated-warning-overlay {  position: fixed;  top: 0;  left: 0;  right: 0;  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);  z-index: 999;  background-color: #ffaba7;  color: rgba(0, 0, 0, 0.7);  border-bottom: 3px solid #da0b00;  padding: 10px 35px;  text-align: center;  font-size: 15px; }  .outdated-warning-overlay .outdated-warning-closer {    position: absolute;    top: calc(50% - 10px);    right: 18px;    cursor: pointer;    width: 12px; }  .outdated-warning-overlay a {    color: #2e63b8; }    .outdated-warning-overlay a:hover {      color: #363636; }'));
    head.appendChild(style);

    const div = document.createElement('div');
    div.classList.add('outdated-warning-overlay');
    const closer = document.createElement('div');
    closer.classList.add('outdated-warning-closer');

    // Icon by font-awesome (license: https://fontawesome.com/license, link: https://fontawesome.com/icons/times?style=solid)
    closer.innerHTML = '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="times" class="svg-inline--fa fa-times fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><path fill="currentColor" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"></path></svg>';
    closer.addEventListener('click', function () {
        document.body.removeChild(div);
    });
    let href = '/stable';
    if (window.documenterBaseURL) {
        href = window.documenterBaseURL + '/../stable';
    }
    div.innerHTML = 'This documentation is not for the latest version. <br> <a href="' + href + '">Go to the latest documentation</a>.';
    div.appendChild(closer);
    document.body.appendChild(div);
};

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', maybeAddWarning);
} else {
    maybeAddWarning();
};
</script></head><body><nav class="toc"><h1>Convex.jl</h1><select id="version-selector" onchange="window.location.href=this.value" style="visibility: hidden"></select><form action="../../../search/" class="search" id="search-form"><input id="search-query" name="q" placeholder="Search docs" type="text"/></form><ul><li><a class="toctext" href="../../../">Home</a></li><li><a class="toctext" href="../../../installation/">Installation</a></li><li><a class="toctext" href="../../../quick_tutorial/">Quick Tutorial</a></li><li><a class="toctext" href="../../../types/">Basic Types</a></li><li><a class="toctext" href="../../../operations/">Supported Operations</a></li><li><a class="toctext" href="../../../complex-domain_optimization/">Complex-domain Optimization</a></li><li><a class="toctext" href="../../../solvers/">Solvers</a></li><li><a class="toctext" href="../../../faq/">FAQ</a></li><li><a class="toctext" href="../../../advanced/">Advanced</a></li><li><a class="toctext" href="../../../problem_depot/">Problem Depot</a></li><li><a class="toctext" href="../../../contributing/">Contributing</a></li><li><a class="toctext" href="../../../credits/">Credits</a></li><li><span class="toctext">Examples</span><ul><li><span class="toctext">General examples</span><ul><li><a class="toctext" href="../../general_examples/DCP_analysis/">DCP analysis</a></li><li><a class="toctext" href="../../general_examples/basic_usage/">Basic Usage</a></li><li><a class="toctext" href="../../general_examples/chebyshev_center/">Chebyshev center</a></li><li><a class="toctext" href="../../general_examples/control/">Control</a></li><li><a class="toctext" href="../../general_examples/huber_regression/">Huber regression</a></li><li><a class="toctext" href="../../general_examples/logistic_regression/">Logistic regression</a></li><li><a class="toctext" href="../../general_examples/max_entropy/">Entropy Maximization</a></li><li><a class="toctext" href="../../general_examples/optimal_advertising/">Optimal advertising</a></li><li><a class="toctext" href="../../general_examples/robust_approx_fitting/">Robust approximate fitting</a></li><li><a class="toctext" href="../../general_examples/svm/">Support vector machine</a></li><li><a class="toctext" href="../../general_examples/svm_l1regularization/">SVM with L^1 regularization</a></li><li><a class="toctext" href="../../general_examples/trade_off_curves/">Trade-off curves</a></li><li><a class="toctext" href="../../general_examples/worst_case_analysis/">Worst case risk analysis</a></li></ul></li><li><span class="toctext">Mixed integer</span><ul><li><a class="toctext" href="../binary_knapsack/">Binary (or 0-1) knapsack problem</a></li><li><a class="toctext" href="../n_queens/">N queens</a></li><li class="current"><a class="toctext" href="">Section Allocation</a><ul class="internal"></ul></li></ul></li><li><span class="toctext">Optimization with complex variables</span><ul><li><a class="toctext" href="../../optimization_with_complex_variables/Fidelity in Quantum Information Theory/">Fidelity in quantum information theory</a></li><li><a class="toctext" href="../../optimization_with_complex_variables/phase_recovery_using_MaxCut/">Phase recovery using MaxCut</a></li><li><a class="toctext" href="../../optimization_with_complex_variables/povm_simulation/">POVM simulation</a></li><li><a class="toctext" href="../../optimization_with_complex_variables/power_flow_optimization/">Power flow optimization</a></li></ul></li><li><span class="toctext">Portfolio optimization</span><ul><li><a class="toctext" href="../../portfolio_optimization/portfolio_optimization/">Portfolio Optimization</a></li><li><a class="toctext" href="../../portfolio_optimization/portfolio_optimization2/">Portfolio Optimization - Markowitz Efficient Frontier</a></li></ul></li><li><span class="toctext">Supplemental material</span><ul><li><a class="toctext" href="../../supplemental_material/Convex.jl_intro_ISMP2015/">Convex Optimization in Julia</a></li><li><a class="toctext" href="../../supplemental_material/paper_examples/">Paper examples</a></li></ul></li><li><span class="toctext">Time series</span><ul><li><a class="toctext" href="../../time_series/time_series/">Time Series Analysis</a></li></ul></li><li><span class="toctext">Tomography</span><ul><li><a class="toctext" href="../../tomography/tomography/">Tomography</a></li></ul></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Examples</li><li>Mixed integer</li><li><a href="">Section Allocation</a></li></ul><a class="edit-page" href="https://github.com/JuliaOpt/Convex.jl/blob/master/docs/examples_literate/mixed_integer/section_allocation.jl"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Section Allocation</span><a class="fa fa-bars" href="#"></a></div></header><p>All of the examples can be found in Jupyter notebook form <a href="../../notebooks.zip">here</a>.</p><div></div><h1><a class="nav-anchor" href="#Section-Allocation-1" id="Section-Allocation-1">Section Allocation</a></h1><p>Suppose you have <span>$n$</span> students in a class who need to be assigned to <span>$m$</span> discussion sections. Each student needs to be assigned to exactly one section. Each discussion section should have between 6 and 10 students. Suppose an <span>$n \times m$</span> preference matrix <span>$P$</span> is given, where <span>$P_{ij}$</span> gives student <span>$i$</span>'s ranking for section <span>$j$</span> (1 would mean it is the student's top choice, 10,000 or a large number would mean the student can not attend that section).</p><p>The goal will be to get an allocation matrix <span>$X$</span>, where <span>$X_{ij} = 1$</span> if student <span>$i$</span> is assigned to section <span>$j$</span> and <span>$0$</span> otherwise.</p><pre><code class="language-julia">using Convex, GLPKMathProgInterface
aux(str) = joinpath(@__DIR__, "aux", str) # path to auxiliary files</code></pre><pre><code class="language-none">aux (generic function with 1 method)</code></pre><p>Load our preference matrix, P</p><pre><code class="language-julia">include(aux("data.jl"))
summary(P)

X = Variable(size(P), :Bin)</code></pre><pre><code class="language-none">Variable
size: (50, 7)
sign: real
vexity: affine
id: 329…593</code></pre><p>We want every student to be assigned to exactly one section. So, every row must have exactly one non-zero entry In other words, the sum of all the columns for every row is 1 We also want each section to have between 6 and 10 students, so the sum of all the rows for every column should be between these</p><pre><code class="language-julia">constraints = [sum(X, dims=2) == 1, sum(X, dims=1) &lt;= 10, sum(X, dims=1) &gt;= 6]</code></pre><pre><code class="language-none">3-element Array{Constraint,1}:
 == constraint (affine)
├─ * (affine; real)
│  ├─ 50×7 real variable (id: 329…593)
│  └─ 7×1 Array{Float64,2}
└─ 1  
 &lt;= constraint (affine)
├─ * (affine; real)
│  ├─ 1×50 Array{Float64,2}
│  └─ 50×7 real variable (id: 329…593)
└─ 10
 &gt;= constraint (affine)
├─ * (affine; real)
│  ├─ 1×50 Array{Float64,2}
│  └─ 50×7 real variable (id: 329…593)
└─ 6 </code></pre><p>Our objective is simple sum(X .* P), which can be more efficiently represented as vec(X)' * vec(P) Since each entry of X is either 0 or 1, this is basically summing up the rankings of students that were assigned to them. If all students got their first choice, this value will be the number of students since the ranking of the first choice is 1.</p><pre><code class="language-julia">p = minimize(vec(X)' * vec(P), constraints)

solve!(p, GLPKSolverMIP())
p.optval</code></pre><pre><code class="language-none">65.0</code></pre><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p><div></div><footer><hr/><a class="previous" href="../n_queens/"><span class="direction">Previous</span><span class="title">N queens</span></a><a class="next" href="../../optimization_with_complex_variables/Fidelity in Quantum Information Theory/"><span class="direction">Next</span><span class="title">Fidelity in quantum information theory</span></a></footer></article></body></HTML>