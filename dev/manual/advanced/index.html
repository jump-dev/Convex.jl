<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Advanced Features · Convex.jl</title><meta name="title" content="Advanced Features · Convex.jl"/><meta property="og:title" content="Advanced Features · Convex.jl"/><meta property="twitter:title" content="Advanced Features · Convex.jl"/><meta name="description" content="Documentation for Convex.jl."/><meta property="og:description" content="Documentation for Convex.jl."/><meta property="twitter:description" content="Documentation for Convex.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Convex.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><input class="collapse-toggle" id="menuitem-1" type="checkbox"/><label class="tocitem" for="menuitem-1"><span class="docs-label">Introduction</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../introduction/installation/">Installation</a></li><li><a class="tocitem" href="../../introduction/quick_tutorial/">Quick Tutorial</a></li><li><a class="tocitem" href="../../introduction/dcp/">Extended formulations and the DCP ruleset</a></li><li><a class="tocitem" href="../../introduction/faq/">FAQ</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">General examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/general_examples/DCP_analysis/">DCP analysis</a></li><li><a class="tocitem" href="../../examples/general_examples/basic_usage/">Basic Usage</a></li><li><a class="tocitem" href="../../examples/general_examples/chebyshev_center/">Chebyshev center</a></li><li><a class="tocitem" href="../../examples/general_examples/control/">Control</a></li><li><a class="tocitem" href="../../examples/general_examples/dualization/">Dualization</a></li><li><a class="tocitem" href="../../examples/general_examples/huber_regression/">Huber regression</a></li><li><a class="tocitem" href="../../examples/general_examples/lasso_regression/">Lasso, Ridge and Elastic Net Regressions</a></li><li><a class="tocitem" href="../../examples/general_examples/logistic_regression/">Logistic regression</a></li><li><a class="tocitem" href="../../examples/general_examples/max_entropy/">Entropy Maximization</a></li><li><a class="tocitem" href="../../examples/general_examples/optimal_advertising/">Optimal advertising</a></li><li><a class="tocitem" href="../../examples/general_examples/robust_approx_fitting/">Robust approximate fitting</a></li><li><a class="tocitem" href="../../examples/general_examples/svm/">Support vector machine</a></li><li><a class="tocitem" href="../../examples/general_examples/svm_l1regularization/">SVM with L^1 regularization</a></li><li><a class="tocitem" href="../../examples/general_examples/trade_off_curves/">Regularized least-squares</a></li><li><a class="tocitem" href="../../examples/general_examples/worst_case_analysis/">Worst case risk analysis</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Mixed integer</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/mixed_integer/binary_knapsack/">Binary (or 0-1) knapsack problem</a></li><li><a class="tocitem" href="../../examples/mixed_integer/n_queens/">N queens</a></li><li><a class="tocitem" href="../../examples/mixed_integer/section_allocation/">Section Allocation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Optimization with complex variables</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/optimization_with_complex_variables/Fidelity in Quantum Information Theory/">Fidelity in quantum information theory</a></li><li><a class="tocitem" href="../../examples/optimization_with_complex_variables/phase_recovery_using_MaxCut/">Phase recovery using MaxCut</a></li><li><a class="tocitem" href="../../examples/optimization_with_complex_variables/povm_simulation/">POVM simulation</a></li><li><a class="tocitem" href="../../examples/optimization_with_complex_variables/power_flow_optimization/">Power flow optimization</a></li><li><a class="tocitem" href="../../examples/optimization_with_complex_variables/quantum_conditional_entropy/">Continuity of the quantum conditional entropy</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Portfolio optimization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/portfolio_optimization/portfolio_optimization/">Portfolio Optimization</a></li><li><a class="tocitem" href="../../examples/portfolio_optimization/portfolio_optimization2/">Portfolio Optimization - Markowitz Efficient Frontier</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">Supplemental material</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/supplemental_material/Convex.jl_intro_ISMP2015/">Convex Optimization in Julia</a></li><li><a class="tocitem" href="../../examples/supplemental_material/paper_examples/">Paper examples</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-6" type="checkbox"/><label class="tocitem" for="menuitem-2-6"><span class="docs-label">Time series</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/time_series/time_series/">Time Series Analysis</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-7" type="checkbox"/><label class="tocitem" for="menuitem-2-7"><span class="docs-label">Tomography</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/tomography/tomography/">Tomography</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../types/">Basic Types</a></li><li><a class="tocitem" href="../operations/">Supported Operations</a></li><li><a class="tocitem" href="../complex-domain_optimization/">Complex-domain Optimization</a></li><li><a class="tocitem" href="../solvers/">Solvers</a></li><li><a class="tocitem" href="../performance_tips/">Performance tips</a></li><li class="is-active"><a class="tocitem" href>Advanced Features</a><ul class="internal"><li><a class="tocitem" href="#DCP-Errors"><span>DCP Errors</span></a></li><li><a class="tocitem" href="#Dual-Variables"><span>Dual Variables</span></a></li><li><a class="tocitem" href="#Warmstarting"><span>Warmstarting</span></a></li><li><a class="tocitem" href="#Fixing-and-freeing-variables"><span>Fixing and freeing variables</span></a></li><li><a class="tocitem" href="#Custom-Variable-Types"><span>Custom Variable Types</span></a></li><li><a class="tocitem" href="#Printing-and-the-tree-structure"><span>Printing and the tree structure</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Developer Docs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../developer/problem_depot/">Problem Depot</a></li><li><a class="tocitem" href="../../developer/contributing/">Contributing</a></li><li><a class="tocitem" href="../../developer/credits/">Credits</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../reference/api/">API</a></li><li><a class="tocitem" href="../../reference/atoms/">Supported operations</a></li></ul></li><li><a class="tocitem" href="../../release_notes/">Release notes</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Advanced Features</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Advanced Features</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/jump-dev/Convex.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/jump-dev/Convex.jl/blob/master/docs/src/manual/advanced.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Advanced-Features"><a class="docs-heading-anchor" href="#Advanced-Features">Advanced Features</a><a id="Advanced-Features-1"></a><a class="docs-heading-anchor-permalink" href="#Advanced-Features" title="Permalink"></a></h1><h2 id="DCP-Errors"><a class="docs-heading-anchor" href="#DCP-Errors">DCP Errors</a><a id="DCP-Errors-1"></a><a class="docs-heading-anchor-permalink" href="#DCP-Errors" title="Permalink"></a></h2><p>When a problem is solved that involves an expression which is not of <a href="https://dcp.stanford.edu/">DCP form</a>, an error is emitted. For example,</p><pre><code class="language-julia-repl hljs">julia&gt; using Convex, SCS

julia&gt; x = Variable();

julia&gt; y = Variable();

julia&gt; p = minimize(log(x) + square(y), [x &gt;= 0, y &gt;= 0]);

julia&gt; solve!(p, SCS.Optimizer; silent = true)
┌ Warning: Problem not DCP compliant: objective is not DCP
└ @ Convex ~/.julia/dev/Convex/src/problems.jl:73
ERROR: DCPViolationError: Expression not DCP compliant. This either means that your problem is not convex, or that we could not prove it was convex using the rules of disciplined convex programming. For a list of supported operations, see https://jump.dev/Convex.jl/stable/operations/. For help writing your problem as a disciplined convex program, please post a reproducible example on https://jump.dev/forum.
Stacktrace:
[...]</code></pre><p>See <a href="../../introduction/dcp/#Extended-formulations-and-the-DCP-ruleset">Extended formulations and the DCP ruleset</a> for more discussion on why these errors occur.</p><h2 id="Dual-Variables"><a class="docs-heading-anchor" href="#Dual-Variables">Dual Variables</a><a id="Dual-Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Dual-Variables" title="Permalink"></a></h2><p>Convex.jl also returns the optimal dual variables for a problem. These are stored in the <code>dual</code> field associated with each constraint.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Convex, SCS</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = Variable();</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; constraint = x &gt;= 0;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; p = minimize(x, [constraint]);</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; solve!(p, SCS.Optimizer; silent = true)</code><code class="nohighlight hljs ansi" style="display:block;">Problem statistics
  problem is DCP         : true
  number of variables    : 1 (1 scalar elements)
  number of constraints  : 1 (1 scalar elements)
  number of coefficients : 1
  number of atoms        : 1

Solution summary
  termination status : OPTIMAL
  primal status      : FEASIBLE_POINT
  dual status        : FEASIBLE_POINT
  objective value    : 0.0

Expression graph
  minimize
   └─ real variable (id: 111…835)
  subject to
   └─ ≥ constraint (affine)
      └─ + (affine; real)
         ├─ real variable (id: 111…835)
         └─ [0;;]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; constraint.dual</code><code class="nohighlight hljs ansi" style="display:block;">0.999999976532818</code></pre><h2 id="Warmstarting"><a class="docs-heading-anchor" href="#Warmstarting">Warmstarting</a><a id="Warmstarting-1"></a><a class="docs-heading-anchor-permalink" href="#Warmstarting" title="Permalink"></a></h2><p>If you&#39;re solving the same problem many times with different values of a parameter, Convex.jl can initialize many solvers with the solution to the previous problem, which sometimes speeds up the solution time. This is called a <strong>warm start</strong>.</p><p>To use this feature, pass the optional argument <code>warmstart=true</code> to the <code>solve!</code> method.</p><pre><code class="language-julia hljs">using Convex, SCS
n = 1_000
y = rand(n);
x = Variable(n)
lambda = Variable(Positive())
fix!(lambda, 100)
problem = minimize(sumsquares(y - x) + lambda * sumsquares(x - 10))
@time solve!(problem, SCS.Optimizer)
# Now warmstart. If the solver takes advantage of warmstarts, this run will be
# faster
fix!(lambda, 105)
@time solve!(problem, SCS.Optimizer; warmstart = true)</code></pre><h2 id="Fixing-and-freeing-variables"><a class="docs-heading-anchor" href="#Fixing-and-freeing-variables">Fixing and freeing variables</a><a id="Fixing-and-freeing-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Fixing-and-freeing-variables" title="Permalink"></a></h2><p>Convex.jl allows you to fix a variable <code>x</code> to a value by calling the <code>fix!</code> method. Fixing the variable essentially turns it into a constant. Fixed variables are sometimes also called parameters.</p><p><code>fix!(x, v)</code> fixes the variable <code>x</code> to the value <code>v</code>.</p><p><code>fix!(x)</code> fixes <code>x</code> to its current value, which might be the value obtained by solving another problem involving the variable <code>x</code>.</p><p>To allow the variable <code>x</code> to vary again, call <code>free!(x)</code>.</p><p>Fixing and freeing variables can be particularly useful as a tool for performing alternating minimization on nonconvex problems. For example, we can find an approximate solution to a nonnegative matrix factorization problem with alternating minimization as follows. We use warmstarts to speed up the solution.</p><pre><code class="language-julia hljs">n, k = 10, 1
A = rand(n, k) * rand(k, n)
x = Variable(n, k)
y = Variable(k, n)
problem = minimize(sum_squares(A - x * y), [x &gt;= 0, y &gt;= 0])
# initialize value of y
set_value!(y, rand(k, n))
# we&#39;ll do 10 iterations of alternating minimization
for i in 1:10
    # first solve for x. With y fixed, the problem is convex.
    fix!(y)
    solve!(problem, SCS.Optimizer; warmstart = i &gt; 1 ? true : false)
    # Now solve for y with x fixed at the previous solution.
    free!(y)
    fix!(x)
    solve!(problem, SCS.Optimizer; warmstart = true)
    free!(x)
end</code></pre><h2 id="Custom-Variable-Types"><a class="docs-heading-anchor" href="#Custom-Variable-Types">Custom Variable Types</a><a id="Custom-Variable-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-Variable-Types" title="Permalink"></a></h2><p>By making subtypes of <a href="../../reference/api/#Convex.AbstractVariable"><code>Convex.AbstractVariable</code></a> that conform to the appropriate interface (see the <a href="../../reference/api/#Convex.AbstractVariable"><code>Convex.AbstractVariable</code></a> docstring for details), one can easily provide custom variable types for specific constructions. These aren&#39;t always necessary though; for example, one can define the following function <code>probabilityvector</code>:</p><pre><code class="language-julia hljs">using Convex
function probability_vector(d::Int)
    x = Variable(d, Positive())
    add_constraint!(x, sum(x) == 1)
    return x
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">probability_vector (generic function with 1 method)</code></pre><p>and then use, say, <code>p = probabilityvector(3)</code> in any Convex.jl problem. The constraints that the entries of <code>p</code> are non-negative and sum to 1 will be automatically added to any problem <code>p</code> is used in.</p><p>Custom types are necessary when one wants to dispatch on custom variables, use them as callable types, or provide a different implementation. Continuing with the probability vector example, let&#39;s say we often use probability vectors variables in taking expectation values, and we want to use function notation for this. To do so, we define:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Convex</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; mutable struct ProbabilityVector &lt;: Convex.AbstractVariable
           head::Symbol
           size::Tuple{Int,Int}
           value::Union{Convex.Value,Nothing}
           vexity::Convex.Vexity
           function ProbabilityVector(d)
               return new(:ProbabilityVector, (d, 1), nothing, Convex.AffineVexity())
           end
       end</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Convex.get_constraints(p::ProbabilityVector) = [ sum(p) == 1 ]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Convex.sign(::ProbabilityVector) = Convex.Positive()</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Convex.vartype(::ProbabilityVector) = Convex.ContVar</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; (p::ProbabilityVector)(x) = dot(p, x)</code></pre><div class="admonition is-warning" id="Warning-f7d5b9fc06f4c3b8"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-f7d5b9fc06f4c3b8" title="Permalink"></a></header><div class="admonition-body"><p>Custom variable types must be <code>mutable</code>, otherwise variables with the same size and value would be treated as the same object.</p></div></div><p>Then one can call <code>p = ProbabilityVector(3)</code> to construct a our custom variable which can be used in Convex, which already encodes the appropriate constraints (non-negative and sums to 1), and which can act on constants via <code>p(x)</code>. For example,</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using SCS</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; p = ProbabilityVector(3)</code><code class="nohighlight hljs ansi" style="display:block;">Variable
size: (3, 1)
sign: positive
vexity: affine
id: 844…164</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; prob = minimize(p([1.0, 2.0, 3.0]))</code><code class="nohighlight hljs ansi" style="display:block;">Problem statistics
  problem is DCP         : true
  number of variables    : 1 (3 scalar elements)
  number of constraints  : 1 (1 scalar elements)
  number of coefficients : 4
  number of atoms        : 4

Solution summary
  termination status : OPTIMIZE_NOT_CALLED
  primal status      : NO_SOLUTION
  dual status        : NO_SOLUTION

Expression graph
  minimize
   └─ sum (affine; positive)
      └─ .* (affine; positive)
         ├─ 3-element positive variable (id: 844…164)
         └─ [1.0; 2.0; 3.0;;]
  subject to
   └─ == constraint (affine)
      └─ + (affine; real)
         ├─ sum (affine; positive)
         │  └─ …
         └─ [-1;;]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; solve!(prob, SCS.Optimizer; silent = false);</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr36"><span class="sgr1">[ Info: </span></span>[Convex.jl] Compilation finished: 0.17 seconds, 5.896 MiB of memory allocated
------------------------------------------------------------------
	       SCS v3.2.3 - Splitting Conic Solver
	(c) Brendan O&#39;Donoghue, Stanford University, 2012
------------------------------------------------------------------
problem:  variables n: 3, constraints m: 4
cones: 	  z: primal zero / dual free vars: 1
	  l: linear vars: 3
settings: eps_abs: 1.0e-04, eps_rel: 1.0e-04, eps_infeas: 1.0e-07
	  alpha: 1.50, scale: 1.00e-01, adaptive_scale: 1
	  max_iters: 100000, normalize: 1, rho_x: 1.00e-06
	  acceleration_lookback: 10, acceleration_interval: 10
lin-sys:  sparse-direct-amd-qdldl
	  nnz(A): 6, nnz(P): 0
------------------------------------------------------------------
 iter | pri res | dua res |   gap   |   obj   |  scale  | time (s)
------------------------------------------------------------------
     0| 1.94e+01  3.06e+00  4.02e+01 -1.60e+01  1.00e-01  6.04e-05 
    50| 1.09e-04  7.07e-05  1.94e-04  1.00e+00  1.00e-01  8.48e-05 
------------------------------------------------------------------
status:  solved
timings: total: 8.56e-05s = setup: 4.84e-05s + solve: 3.72e-05s
	 lin-sys: 7.26e-06s, cones: 4.36e-06s, accel: 2.11e-06s
------------------------------------------------------------------
objective = 1.000168
------------------------------------------------------------------</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; evaluate(p)</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Float64}:
 0.9998127159848165
 0.00010875388968836632
 7.823604474042554e-5</code></pre><p>Subtypes of <code>AbstractVariable</code> must have the fields <code>head</code> and <code>size</code>. Then they must also</p><ul><li>either have a field <code>value</code>, or implement <a href="../../reference/api/#Convex._value"><code>Convex._value</code></a> and <a href="../../reference/api/#Convex.set_value!"><code>Convex.set_value!</code></a></li><li>either have a field <code>vexity</code>, or implement <a href="../../reference/api/#Convex.vexity"><code>Convex.vexity</code></a> and <a href="../../reference/api/#Convex.vexity!"><code>Convex.vexity!</code></a> (though the latter is only necessary if you wish to support <a href="../../reference/api/#Convex.fix!"><code>Convex.fix!</code></a> and <a href="../../reference/api/#Convex.free!"><code>Convex.free!</code></a>)</li><li>have a field <code>constraints</code> or implement <a href="../../reference/api/#Convex.get_constraints"><code>Convex.get_constraints</code></a> (optionally implement <a href="../../reference/api/#Convex.add_constraint!"><code>Convex.add_constraint!</code></a> to be able to add constraints to your variable after its creation),</li><li>either have a field <code>sign</code> or implement <a href="../../reference/api/#Base.sign-Tuple{Convex.AbstractVariable}"><code>Convex.sign</code></a>, and</li><li>either have a field <code>vartype</code>, or implement <a href="../../reference/api/#Convex.vartype"><code>Convex.vartype</code></a> (optionally, implement <a href="../../reference/api/#Convex.vartype!"><code>Convex.vartype!</code></a> to be able to change a variable&#39;s <code>vartype</code> after construction).</li></ul><h2 id="Printing-and-the-tree-structure"><a class="docs-heading-anchor" href="#Printing-and-the-tree-structure">Printing and the tree structure</a><a id="Printing-and-the-tree-structure-1"></a><a class="docs-heading-anchor-permalink" href="#Printing-and-the-tree-structure" title="Permalink"></a></h2><p>A Convex problem is structured as a <em>tree</em>, with the <em>root</em> being the problem object, with branches to the objective and the set of constraints. The objective is an <code>AbstractExpr</code> which itself is a tree, with each atom being a node and having <code>children</code> which are other atoms, variables, or constants. Convex provides <code>children</code> methods from <a href="https://github.com/Keno/AbstractTrees.jl">AbstractTrees.jl</a> so that the tree-traversal functions of that package can be used with Convex.jl problems and structures. This is what allows powers the printing of problems, expressions, and constraints. The depth to which the tree corresponding to a problem, expression, or constraint is printed is controlled by the global variable <a href="../../reference/api/#Convex.MAXDEPTH"><code>Convex.MAXDEPTH</code></a>, which defaults to 3. This can be changed by for example, setting</p><pre><code class="language-julia hljs">Convex.MAXDEPTH[] = 5</code></pre><p>Likewise, <a href="../../reference/api/#Convex.MAXWIDTH"><code>Convex.MAXWIDTH</code></a>, which defaults to 15, controls the &quot;width&quot; of the printed tree. For example, when printing a problem with 20 constraints, only the first <code>MAXWIDTH</code> of the constraints will be printed. Vertical dots, <code>⋮</code>, will be printed indicating that some constraints were omitted in the printing.</p><p>A related setting is <a href="../../reference/api/#Convex.MAXDIGITS"><code>Convex.MAXDIGITS</code></a>, which controls printing the internal IDs of atoms: if the string representation of an ID is longer than double the value of <code>MAXDIGITS</code>, then it is shortened by printing only the first and last <code>MAXDIGITS</code> characters.</p><p>The AbstractTrees methods can also be used to analyze the structure of a Convex.jl problem. For example,</p><pre><code class="language-julia hljs">using Convex, AbstractTrees
x = Variable()
p = maximize( log(x), x &gt;= 1, x &lt;= 3 )
for leaf in AbstractTrees.Leaves(p)
    println(&quot;Here&#39;s a leaf: $(summary(leaf))&quot;)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Here&#39;s a leaf: real variable (id: 181…294)
Here&#39;s a leaf: real variable (id: 181…294)
Here&#39;s a leaf: negative constant
Here&#39;s a leaf: real variable (id: 181…294)
Here&#39;s a leaf: negative constant</code></pre><p>We can also iterate over the problem in various orders. The following descriptions are taken from the AbstractTrees.jl docstrings, which have more information.</p><h3 id="PostOrderDFS"><a class="docs-heading-anchor" href="#PostOrderDFS">PostOrderDFS</a><a id="PostOrderDFS-1"></a><a class="docs-heading-anchor-permalink" href="#PostOrderDFS" title="Permalink"></a></h3><p>Iterator to visit the nodes of a tree, guaranteeing that children will be visited before their parents.</p><pre><code class="language-julia hljs">for (i, node) in enumerate(AbstractTrees.PostOrderDFS(p))
    println(&quot;Here&#39;s node $i via PostOrderDFS: $(summary(node))&quot;)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Here&#39;s node 1 via PostOrderDFS: real variable (id: 181…294)
Here&#39;s node 2 via PostOrderDFS: log (concave; real)
Here&#39;s node 3 via PostOrderDFS: real variable (id: 181…294)
Here&#39;s node 4 via PostOrderDFS: negative constant
Here&#39;s node 5 via PostOrderDFS: + (affine; real)
Here&#39;s node 6 via PostOrderDFS: ≥ constraint (affine)
Here&#39;s node 7 via PostOrderDFS: real variable (id: 181…294)
Here&#39;s node 8 via PostOrderDFS: negative constant
Here&#39;s node 9 via PostOrderDFS: + (affine; real)
Here&#39;s node 10 via PostOrderDFS: ≤ constraint (affine)
Here&#39;s node 11 via PostOrderDFS: 2-element Vector{Constraint}
Here&#39;s node 12 via PostOrderDFS: Problem{Float64} (concave; real)</code></pre><h3 id="PreOrderDFS"><a class="docs-heading-anchor" href="#PreOrderDFS">PreOrderDFS</a><a id="PreOrderDFS-1"></a><a class="docs-heading-anchor-permalink" href="#PreOrderDFS" title="Permalink"></a></h3><p>Iterator to visit the nodes of a tree, guaranteeing that parents will be visited before their children.</p><pre><code class="language-julia hljs">for (i, node) in enumerate(AbstractTrees.PreOrderDFS(p))
    println(&quot;Here&#39;s node $i via PreOrderDFS: $(summary(node))&quot;)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Here&#39;s node 1 via PreOrderDFS: Problem{Float64} (concave; real)
Here&#39;s node 2 via PreOrderDFS: log (concave; real)
Here&#39;s node 3 via PreOrderDFS: real variable (id: 181…294)
Here&#39;s node 4 via PreOrderDFS: 2-element Vector{Constraint}
Here&#39;s node 5 via PreOrderDFS: ≥ constraint (affine)
Here&#39;s node 6 via PreOrderDFS: + (affine; real)
Here&#39;s node 7 via PreOrderDFS: real variable (id: 181…294)
Here&#39;s node 8 via PreOrderDFS: negative constant
Here&#39;s node 9 via PreOrderDFS: ≤ constraint (affine)
Here&#39;s node 10 via PreOrderDFS: + (affine; real)
Here&#39;s node 11 via PreOrderDFS: real variable (id: 181…294)
Here&#39;s node 12 via PreOrderDFS: negative constant</code></pre><h3 id="StatelessBFS"><a class="docs-heading-anchor" href="#StatelessBFS">StatelessBFS</a><a id="StatelessBFS-1"></a><a class="docs-heading-anchor-permalink" href="#StatelessBFS" title="Permalink"></a></h3><p>Iterator to visit the nodes of a tree, guaranteeing that all nodes of a level will be visited before their children.</p><pre><code class="language-julia hljs">for (i, node) in enumerate(AbstractTrees.StatelessBFS(p))
    println(&quot;Here&#39;s node $i via StatelessBFS: $(summary(node))&quot;)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Here&#39;s node 1 via StatelessBFS: Problem{Float64} (concave; real)
Here&#39;s node 2 via StatelessBFS: log (concave; real)
Here&#39;s node 3 via StatelessBFS: 2-element Vector{Constraint}
Here&#39;s node 4 via StatelessBFS: real variable (id: 181…294)
Here&#39;s node 5 via StatelessBFS: ≥ constraint (affine)
Here&#39;s node 6 via StatelessBFS: ≤ constraint (affine)
Here&#39;s node 7 via StatelessBFS: + (affine; real)
Here&#39;s node 8 via StatelessBFS: + (affine; real)
Here&#39;s node 9 via StatelessBFS: real variable (id: 181…294)
Here&#39;s node 10 via StatelessBFS: negative constant
Here&#39;s node 11 via StatelessBFS: real variable (id: 181…294)
Here&#39;s node 12 via StatelessBFS: negative constant</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../performance_tips/">« Performance tips</a><a class="docs-footer-nextpage" href="../../developer/problem_depot/">Problem Depot »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.11.4 on <span class="colophon-date" title="Monday 2 June 2025 21:36">Monday 2 June 2025</span>. Using Julia version 1.10.9.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
